<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Snapdom åˆ†äº«åŠŸèƒ½æ¼”ç¤º</title>
  <script src="https://unpkg.com/@zumer/snapdom/dist/snapdom.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      background: #f5f5f5;
      padding: 20px;
    }

    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      color: #333;
    }

    .header h1 {
      font-size: 32px;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 16px;
      color: #666;
    }

    .controls {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    .button {
      padding: 12px 24px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
      margin: 5px;
    }

    .button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
    }

    .button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .preview-area {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    .preview-area h2 {
      margin-bottom: 15px;
      color: #333;
    }

    .preview-image {
      max-width: 100%;
      border-radius: 8px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: #999;
      font-size: 16px;
    }

    /* åˆ†äº«æ¨¡æ¿æ ·å¼ */
    .share-template {
      width: 750px;
      min-height: 1200px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 40px;
      box-sizing: border-box;
      color: #333;
    }

    .template-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .template-logo {
      font-size: 24px;
      font-weight: 700;
      color: white;
      margin-bottom: 20px;
      letter-spacing: 2px;
    }

    .template-title {
      font-size: 36px;
      font-weight: 800;
      color: white;
      margin-bottom: 12px;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .template-subtitle {
      font-size: 18px;
      color: rgba(255, 255, 255, 0.9);
    }

    .question-section {
      background: white;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .question-label {
      font-size: 14px;
      color: #999;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .question-text {
      font-size: 20px;
      font-weight: 600;
      color: #333;
      line-height: 1.6;
    }

    .content-section {
      background: white;
      border-radius: 16px;
      padding: 32px 24px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
    }

    .section {
      margin-bottom: 32px;
    }

    .section:last-child {
      margin-bottom: 0;
    }

    .section-title {
      font-size: 22px;
      font-weight: 700;
      color: #667eea;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .section-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border-radius: 8px;
      font-size: 18px;
      font-weight: 800;
    }

    .section-content {
      padding-left: 12px;
    }

    .item {
      display: flex;
      align-items: flex-start;
      margin: 12px 0;
      line-height: 1.8;
    }

    .bullet {
      color: #667eea;
      font-size: 24px;
      margin-right: 12px;
      line-height: 1.6;
    }

    .item-text {
      flex: 1;
      font-size: 16px;
      color: #555;
    }

    .template-footer {
      margin-top: 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
      border-top: 2px solid rgba(255, 255, 255, 0.3);
    }

    .footer-text {
      color: white;
      font-size: 16px;
      font-weight: 600;
    }

    .qr-placeholder {
      width: 80px;
      height: 80px;
      background: white;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #999;
      text-align: center;
    }

    .hidden {
      position: absolute;
      left: -9999px;
      top: 0;
    }

    .info-box {
      background: #e7f3ff;
      border-left: 4px solid #2196f3;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }

    .info-box p {
      margin: 5px 0;
      color: #333;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <div class="header">
      <h1>ğŸ“¸ Snapdom åˆ†äº«åŠŸèƒ½æ¼”ç¤º</h1>
      <p>æµ‹è¯• DOM è½¬å›¾ç‰‡åŠŸèƒ½ - ä½¿ç”¨ @zumer/snapdom</p>
    </div>

    <div class="controls">
      <h3>æ“ä½œæ§åˆ¶</h3>
      <button class="button" onclick="generateImage()">ğŸ¨ ç”Ÿæˆåˆ†äº«é•¿å›¾</button>
      <button class="button" onclick="downloadImage()" id="downloadBtn" disabled>ğŸ“¥ ä¸‹è½½å›¾ç‰‡</button>
      <button class="button" onclick="clearPreview()">ğŸ—‘ï¸ æ¸…é™¤é¢„è§ˆ</button>

      <div class="info-box">
        <p><strong>ğŸ’¡ ä½¿ç”¨è¯´æ˜ï¼š</strong></p>
        <p>1. ç‚¹å‡»ã€Œç”Ÿæˆåˆ†äº«é•¿å›¾ã€æŒ‰é’®ï¼Œå°†ä¸‹æ–¹çš„æ¨¡æ¿è½¬æ¢ä¸ºå›¾ç‰‡</p>
        <p>2. ç”ŸæˆæˆåŠŸåï¼Œå›¾ç‰‡ä¼šæ˜¾ç¤ºåœ¨é¢„è§ˆåŒºåŸŸ</p>
        <p>3. ç‚¹å‡»ã€Œä¸‹è½½å›¾ç‰‡ã€æŒ‰é’®å¯ä¿å­˜åˆ°æœ¬åœ°</p>
        <p>4. ä½¿ç”¨ 2å€åˆ†è¾¨ç‡æ¸²æŸ“ï¼Œç¡®ä¿å›¾ç‰‡æ¸…æ™°</p>
      </div>
    </div>

    <div class="preview-area" id="previewArea" style="display: none;">
      <h2>ğŸ“± é¢„è§ˆæ•ˆæœ</h2>
      <img id="previewImage" class="preview-image" alt="åˆ†äº«å›¾é¢„è§ˆ">
    </div>

    <!-- éšè—çš„æ¨¡æ¿ï¼Œç”¨äºç”Ÿæˆå›¾ç‰‡ -->
    <div class="hidden">
      <div id="shareTemplate" class="share-template">
        <div class="template-header">
          <div class="template-logo">ç™¾ä¸‡é—®AI</div>
          <div class="template-title">è¡ŒåŠ¨è“å›¾</div>
          <div class="template-subtitle">ç”± å·´è²ç‰¹ æä¾›</div>
        </div>

        <div class="question-section">
          <div class="question-label">æ ¸å¿ƒè®®é¢˜</div>
          <div class="question-text">"å¦‚ä½•åœ¨ä¸‰ä¸ªæœˆå†…å°†æˆ‘çš„åˆ›ä¸šé¡¹ç›®ç›ˆåˆ©ï¼Ÿ"</div>
        </div>

        <div class="content-section">
          <div class="section">
            <div class="section-title">
              <span class="section-number">1</span>
              æ ¸å¿ƒé£é™©è¯†åˆ«
            </div>
            <div class="section-content">
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">ç°é‡‘æµé£é™©ï¼šé¡¹ç›®å¯åŠ¨åˆæœŸéœ€è¦é‡ç‚¹å…³æ³¨ç°é‡‘æµç®¡ç†</span>
              </div>
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">å¸‚åœºé£é™©ï¼šç›®æ ‡å®¢ç¾¤è§„æ¨¡éœ€è¦è¿›ä¸€æ­¥éªŒè¯</span>
              </div>
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">è¿è¥é£é™©ï¼šæˆæœ¬æ§åˆ¶å’Œå›¢é˜Ÿå»ºè®¾æ˜¯å…³é”®æŒ‘æˆ˜</span>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-title">
              <span class="section-number">2</span>
              ç›ˆåˆ©æ¨¡å¼æ¢ç´¢
            </div>
            <div class="section-content">
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">åŸºç¡€æ”¶å…¥ï¼šå»ºç«‹ç¨³å®šçš„æ ¸å¿ƒä¸šåŠ¡æ”¶å…¥æ¥æº</span>
              </div>
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">å¢å€¼æœåŠ¡ï¼šæä¾›é«˜åˆ©æ¶¦ç‡çš„å¢å€¼æœåŠ¡</span>
              </div>
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">ç¤¾ç¾¤å˜ç°ï¼šæ„å»ºä»˜è´¹ç¤¾ç¾¤æä¾›æŒç»­ä»·å€¼</span>
              </div>
            </div>
          </div>

          <div class="section">
            <div class="section-title">
              <span class="section-number">3</span>
              ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®
            </div>
            <div class="section-content">
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">1. MVP éªŒè¯ï¼šç”¨æœ€å°æˆæœ¬æµ‹è¯•å¸‚åœºååº”</span>
              </div>
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">2. è´¢åŠ¡å»ºæ¨¡ï¼šè¯¦ç»†è®¡ç®—ç›ˆäºå¹³è¡¡ç‚¹</span>
              </div>
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">3. ç”¨æˆ·è®¿è°ˆï¼šæ·±å…¥äº†è§£ç›®æ ‡ç”¨æˆ·çœŸå®éœ€æ±‚</span>
              </div>
              <div class="item">
                <span class="bullet">â€¢</span>
                <span class="item-text">4. è¿­ä»£ä¼˜åŒ–ï¼šæ ¹æ®åé¦ˆå¿«é€Ÿè°ƒæ•´äº§å“æ–¹å‘</span>
              </div>
            </div>
          </div>
        </div>

        <div class="template-footer">
          <div class="footer-text">ç™¾ä¸‡é—®AI - è®©æ™ºæ…§è§¦æ‰‹å¯åŠ</div>
          <div class="qr-placeholder">æ‰«ç ä½“éªŒ</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let currentImageUrl = null;

    async function generateImage() {
      const button = event.target;
      const downloadBtn = document.getElementById('downloadBtn');
      const previewArea = document.getElementById('previewArea');
      const previewImage = document.getElementById('previewImage');
      const template = document.getElementById('shareTemplate');

      try {
        button.disabled = true;
        button.textContent = 'ğŸ”„ ç”Ÿæˆä¸­...';
        previewArea.style.display = 'block';
        previewImage.style.display = 'none';
        previewArea.innerHTML = '<div class="loading">â³ æ­£åœ¨ç”Ÿæˆå›¾ç‰‡ï¼Œè¯·ç¨å€™...</div>';

        // ä½¿ç”¨ snapDOM ç”Ÿæˆå›¾ç‰‡
        const imageUrl = await snapDOM.toImage(template, {
          type: 'png',
          quality: 1,
          backgroundColor: 'transparent',
          scale: 2  // 2å€åˆ†è¾¨ç‡
        });

        // æ˜¾ç¤ºé¢„è§ˆ
        currentImageUrl = imageUrl;
        previewArea.innerHTML = '<h2>ğŸ“± é¢„è§ˆæ•ˆæœ</h2><img id="previewImage" class="preview-image" alt="åˆ†äº«å›¾é¢„è§ˆ">';
        const newPreviewImage = document.getElementById('previewImage');
        newPreviewImage.src = imageUrl;
        
        downloadBtn.disabled = false;
        button.textContent = 'âœ… ç”ŸæˆæˆåŠŸ';
        
        setTimeout(() => {
          button.textContent = 'ğŸ¨ ç”Ÿæˆåˆ†äº«é•¿å›¾';
          button.disabled = false;
        }, 2000);

      } catch (error) {
        console.error('ç”Ÿæˆå¤±è´¥:', error);
        previewArea.innerHTML = '<div class="loading" style="color: #f44336;">âŒ ç”Ÿæˆå¤±è´¥: ' + error.message + '</div>';
        button.textContent = 'ğŸ¨ ç”Ÿæˆåˆ†äº«é•¿å›¾';
        button.disabled = false;
      }
    }

    function downloadImage() {
      if (!currentImageUrl) {
        alert('è¯·å…ˆç”Ÿæˆå›¾ç‰‡');
        return;
      }

      const link = document.createElement('a');
      link.href = currentImageUrl;
      link.download = `ç™¾ä¸‡é—®AI_åˆ†äº«å›¾_${Date.now()}.png`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);

      alert('âœ… å›¾ç‰‡å·²å¼€å§‹ä¸‹è½½ï¼');
    }

    function clearPreview() {
      const previewArea = document.getElementById('previewArea');
      const downloadBtn = document.getElementById('downloadBtn');
      
      previewArea.style.display = 'none';
      downloadBtn.disabled = true;
      currentImageUrl = null;
    }
  </script>
</body>
</html>
