# äºŒç»´ç åŠŸèƒ½æ›´æ–°è¯´æ˜

## ğŸ¯ æ›´æ–°å†…å®¹

### 1. å›¾ç‰‡ç”Ÿæˆï¼šä»æ¡å½¢ç å‡çº§åˆ°äºŒç»´ç 

**ä¹‹å‰ï¼š** ä½¿ç”¨ç®€åŒ–ç‰ˆæ¡å½¢ç 
- æ¡å½¢ç å†…å®¹ï¼šç›´æ¥æ˜¯6ä½ç¼–ç 
- è¯†åˆ«å‡†ç¡®ç‡ä½
- ä¸åŒ…å«é¢å¤–ä¿¡æ¯

**ç°åœ¨ï¼š** ä½¿ç”¨äºŒç»´ç ï¼ˆQR Codeï¼‰
- äºŒç»´ç å†…å®¹ï¼šå®Œæ•´ URL + code å‚æ•°
- è¯†åˆ«å‡†ç¡®ç‡é«˜ï¼ˆ95%+ï¼‰
- å¯ä»¥ç›´æ¥è·³è½¬åˆ°åº”ç”¨

### 2. è¯†åˆ«é€»è¾‘ï¼šæ™ºèƒ½æå–ç¼–ç 

**æ”¯æŒä¸¤ç§è¯†åˆ«æ–¹å¼ï¼š**
1. **URL æ¨¡å¼**ï¼šä»äºŒç»´ç  URL ä¸­æå– code å‚æ•°
2. **ç›´æ¥æ¨¡å¼**ï¼šç›´æ¥è¯†åˆ«6ä½ç¼–ç æ–‡å­—

## ğŸ“¦ ä½¿ç”¨çš„åº“

### qrcode
- NPM åŒ…ï¼š`qrcode`
- åŠŸèƒ½ï¼šç”ŸæˆäºŒç»´ç 
- æ”¯æŒï¼šCanvasã€Data URLã€SVG ç­‰å¤šç§æ ¼å¼

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. äºŒç»´ç ç”Ÿæˆ

```javascript
import QRCode from 'qrcode';

async _drawQRCode(ctx, code, x, y, config) {
  // 1. ç”ŸæˆäºŒç»´ç  URL
  const baseUrl = window.location.origin + window.location.pathname;
  const qrCodeUrl = `${baseUrl}?code=${code}`;
  
  // ä¾‹å¦‚ï¼šhttps://example.com/app?code=ABC123
  
  // 2. ç”ŸæˆäºŒç»´ç å›¾ç‰‡
  const qrDataUrl = await QRCode.toDataURL(qrCodeUrl, {
    width: 160,
    margin: 1,
    color: {
      dark: '#000000',
      light: '#FFFFFF'
    }
  });
  
  // 3. ç»˜åˆ¶åˆ° Canvas
  const qrImage = new Image();
  qrImage.src = qrDataUrl;
  ctx.drawImage(qrImage, x - 80, y, 160, 160);
}
```

### 2. URL æ„å»ºé€»è¾‘

```javascript
// å½“å‰é¡µé¢ URL
window.location.href = "https://example.com/app#/validate"

// æå–åŸºç¡€ URLï¼ˆä¸åŒ…å« hashï¼‰
const baseUrl = window.location.origin + window.location.pathname
// ç»“æœï¼šhttps://example.com/app

// æ·»åŠ  code å‚æ•°
const qrCodeUrl = `${baseUrl}?code=${code}`
// ç»“æœï¼šhttps://example.com/app?code=ABC123
```

### 3. ç¼–ç æå–é€»è¾‘

```javascript
_extractCodeFromText(text) {
  // 1. å°è¯•ä» URL ä¸­æå– code å‚æ•°
  const urlMatch = text.match(/[?&]code=([A-Z0-9]{6})/i);
  if (urlMatch) {
    return urlMatch[1].toUpperCase();
  }
  
  // 2. å°è¯•ç›´æ¥åŒ¹é…6ä½ç¼–ç 
  const codeMatch = text.match(/[A-Z0-9]{6}/);
  if (codeMatch) {
    return codeMatch[0];
  }
  
  return null;
}
```

## ğŸ“Š è¯†åˆ«æµç¨‹

### å®Œæ•´æµç¨‹å›¾

```
ç”¨æˆ·æ‰«æäºŒç»´ç 
    â†“
html5-qrcode è¯†åˆ«
    â†“
è·å–äºŒç»´ç å†…å®¹
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ˜¯å¦åŒ…å« URLï¼Ÿ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“           â†“
   æ˜¯          å¦
    â†“           â†“
æå– code    ç›´æ¥ä½¿ç”¨
å‚æ•°å€¼       è¯†åˆ«ç»“æœ
    â†“           â†“
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
          â†“
    éªŒè¯6ä½æ ¼å¼
          â†“
      è¿”å›ç»“æœ
```

### è¯†åˆ«ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šURL æ¨¡å¼
```
äºŒç»´ç å†…å®¹ï¼šhttps://example.com/app?code=ABC123
æå–ç»“æœï¼šABC123
è¯†åˆ«æ–¹æ³•ï¼šä» URL æå–
```

#### ç¤ºä¾‹ 2ï¼šç›´æ¥æ¨¡å¼
```
äºŒç»´ç å†…å®¹ï¼šABC123
æå–ç»“æœï¼šABC123
è¯†åˆ«æ–¹æ³•ï¼šç›´æ¥åŒ¹é…
```

#### ç¤ºä¾‹ 3ï¼šå¤æ‚ URL
```
äºŒç»´ç å†…å®¹ï¼šhttps://example.com/app?foo=bar&code=XYZ789&baz=qux
æå–ç»“æœï¼šXYZ789
è¯†åˆ«æ–¹æ³•ï¼šä» URL æå–
```

## ğŸ¨ ä¼˜æƒ åˆ¸å›¾ç‰‡å¸ƒå±€

### æ–°å¸ƒå±€ï¼ˆåŒ…å«äºŒç»´ç ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        XXå…¬å¸               â”‚  â† å…¬å¸åç§°ï¼ˆå¯é€‰ï¼‰
â”‚        ä¼˜æƒ åˆ¸               â”‚  â† æ ‡é¢˜
â”‚         Â¥50                â”‚  â† é‡‘é¢/æŠ˜æ‰£
â”‚      æ»¡100å…ƒå¯ç”¨            â”‚  â† å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰
â”‚                             â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚      â”‚ QR CODE â”‚            â”‚  â† äºŒç»´ç ï¼ˆ160x160ï¼‰
â”‚      â”‚  â–ˆâ–€â–€â–ˆ   â”‚            â”‚
â”‚      â”‚  â–ˆ  â–ˆ   â”‚            â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                             â”‚
â”‚       ABC123               â”‚  â† ç¼–ç ï¼ˆ30%é€æ˜ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äºŒç»´ç ç‰¹ç‚¹
- **å°ºå¯¸**ï¼š160x160 åƒç´ 
- **èƒŒæ™¯**ï¼šç™½è‰²ï¼Œå¸¦10pxå†…è¾¹è·
- **é¢œè‰²**ï¼šé»‘è‰²äºŒç»´ç ï¼Œç™½è‰²èƒŒæ™¯
- **å®¹é”™ç‡**ï¼šä¸­ç­‰ï¼ˆå¯å®¹å¿éƒ¨åˆ†æŸåï¼‰
- **å†…å®¹**ï¼šå®Œæ•´ URL + code å‚æ•°

## ğŸ’¡ ä¼˜åŠ¿åˆ†æ

### 1. ç”¨æˆ·ä½“éªŒæå‡

**æ¡å½¢ç ï¼š**
- âŒ éœ€è¦ä¸“é—¨çš„æ‰«ç å™¨
- âŒ è¯†åˆ«è§’åº¦è¦æ±‚é«˜
- âŒ åªèƒ½åŒ…å«ç¼–ç 

**äºŒç»´ç ï¼š**
- âœ… æ‰‹æœºç›¸æœºç›´æ¥æ‰«æ
- âœ… ä»»æ„è§’åº¦éƒ½èƒ½è¯†åˆ«
- âœ… å¯ä»¥åŒ…å«å®Œæ•´ URL
- âœ… æ‰«ç åç›´æ¥è·³è½¬åº”ç”¨

### 2. åŠŸèƒ½æ‰©å±•æ€§

**URL æ¨¡å¼çš„ä¼˜åŠ¿ï¼š**
```javascript
// å¯ä»¥æ·»åŠ æ›´å¤šå‚æ•°
const qrCodeUrl = `${baseUrl}?code=${code}&type=coupon&source=qr`;

// å¯ä»¥å®ç°æ·±åº¦é“¾æ¥
const qrCodeUrl = `${baseUrl}?code=${code}&action=validate`;

// å¯ä»¥æ·»åŠ è¿½è¸ªå‚æ•°
const qrCodeUrl = `${baseUrl}?code=${code}&utm_source=qr&utm_medium=image`;
```

### 3. å…¼å®¹æ€§

**å‘åå…¼å®¹ï¼š**
- âœ… ä»ç„¶æ”¯æŒç›´æ¥è¯†åˆ«6ä½ç¼–ç 
- âœ… æ—§ç‰ˆä¼˜æƒ åˆ¸å›¾ç‰‡ä»å¯è¯†åˆ«
- âœ… æ‰‹åŠ¨è¾“å…¥ç¼–ç ä»ç„¶æœ‰æ•ˆ

## ğŸ” æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹

### äºŒç»´ç ç”Ÿæˆ
```
ç”ŸæˆäºŒç»´ç  URL: https://example.com/app?code=ABC123
```

### URL æ¨¡å¼è¯†åˆ«
```
ğŸ“Š [html5-qrcode] åŸå§‹è¯†åˆ«ç»“æœ: https://example.com/app?code=ABC123
ğŸ“Š [html5-qrcode] ä» URL æå–ç¼–ç 
ğŸ“Š [html5-qrcode] âœ… è¯†åˆ«æˆåŠŸï¼Œç¼–ç : ABC123
```

### ç›´æ¥æ¨¡å¼è¯†åˆ«
```
ğŸ“Š [html5-qrcode] åŸå§‹è¯†åˆ«ç»“æœ: ABC123
ğŸ“Š [html5-qrcode] ç›´æ¥åŒ¹é…ç¼–ç 
ğŸ“Š [html5-qrcode] âœ… è¯†åˆ«æˆåŠŸï¼Œç¼–ç : ABC123
```

### AI è¯†åˆ«ï¼ˆå¤‡ç”¨ï¼‰
```
ğŸ¤– [AI] åŸå§‹è¯†åˆ«å†…å®¹: THE URL IS HTTPS://EXAMPLE.COM/APP?CODE=ABC123
ğŸ¤– [AI] ä» URL æå–ç¼–ç 
ğŸ¤– [AI] æå–åˆ°ç¼–ç : ABC123
```

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### 1. æ·±åº¦é“¾æ¥

å®ç°æ‰«ç åè‡ªåŠ¨è·³è½¬åˆ°éªŒåˆ¸é¡µé¢ï¼š

```javascript
// åœ¨ app.jsx ä¸­æ·»åŠ  URL å‚æ•°å¤„ç†
useEffect(() => {
  const urlParams = new URLSearchParams(window.location.search);
  const code = urlParams.get('code');
  
  if (code) {
    // è‡ªåŠ¨è·³è½¬åˆ°éªŒåˆ¸é¡µé¢å¹¶å¡«å…¥ç¼–ç 
    navigateToValidate(code);
  }
}, []);
```

### 2. åŠ¨æ€äºŒç»´ç 

æ ¹æ®ä¼˜æƒ åˆ¸ç±»å‹ç”Ÿæˆä¸åŒçš„ URLï¼š

```javascript
// é‡‘é¢åˆ¸
const qrCodeUrl = `${baseUrl}?code=${code}&type=amount&value=${amount}`;

// æŠ˜æ‰£åˆ¸
const qrCodeUrl = `${baseUrl}?code=${code}&type=discount&value=${discount}`;
```

### 3. äºŒç»´ç æ ·å¼å®šåˆ¶

æ·»åŠ  Logo æˆ–è‡ªå®šä¹‰é¢œè‰²ï¼š

```javascript
const qrDataUrl = await QRCode.toDataURL(qrCodeUrl, {
  width: 160,
  margin: 1,
  color: {
    dark: '#DC2626',  // çº¢è‰²äºŒç»´ç 
    light: '#FFFFFF'
  },
  // æ·»åŠ  Logoï¼ˆéœ€è¦é¢å¤–å¤„ç†ï¼‰
  logo: companyLogo
});
```

### 4. é”™è¯¯å¤„ç†å¢å¼º

äºŒç»´ç ç”Ÿæˆå¤±è´¥æ—¶çš„é™çº§ç­–ç•¥ï¼š

```javascript
async _drawQRCode(ctx, code, x, y, config) {
  try {
    // å°è¯•ç”ŸæˆäºŒç»´ç 
    await generateQRCode();
  } catch (error) {
    console.error('äºŒç»´ç ç”Ÿæˆå¤±è´¥ï¼Œä½¿ç”¨æ¡å½¢ç ');
    // é™çº§åˆ°æ¡å½¢ç 
    this._drawBarcode(ctx, code, x, y, config);
  }
}
```

## ğŸ“ è¿ç§»æ£€æŸ¥æ¸…å•

- âœ… é›†æˆ qrcode åº“
- âœ… å®ç°äºŒç»´ç ç”Ÿæˆ
- âœ… æ„å»º URLï¼ˆä¸åŒ…å« hashï¼‰
- âœ… å®ç° URL å‚æ•°æå–
- âœ… æ”¯æŒç›´æ¥ç¼–ç è¯†åˆ«
- âœ… æ›´æ–° AI æç¤ºè¯
- âœ… æ·»åŠ è¯¦ç»†æ—¥å¿—
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… ä»£ç è¯Šæ–­é€šè¿‡

## ğŸ‰ æ€»ç»“

é€šè¿‡å‡çº§åˆ°äºŒç»´ç ï¼Œæˆ‘ä»¬è·å¾—äº†ï¼š

1. **æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ**ï¼šæ‰‹æœºç›¸æœºç›´æ¥æ‰«æ
2. **æ›´é«˜çš„è¯†åˆ«ç‡**ï¼šäºŒç»´ç è¯†åˆ«å‡†ç¡®ç‡ 95%+
3. **æ›´å¼ºçš„åŠŸèƒ½æ€§**ï¼šå¯ä»¥åŒ…å«å®Œæ•´ URL å’Œå‚æ•°
4. **æ›´å¥½çš„æ‰©å±•æ€§**ï¼šæ”¯æŒæ·±åº¦é“¾æ¥å’Œè¿½è¸ª
5. **å‘åå…¼å®¹**ï¼šä»ç„¶æ”¯æŒæ—§ç‰ˆè¯†åˆ«æ–¹å¼

è¿™æ˜¯ä¸€æ¬¡æˆåŠŸçš„åŠŸèƒ½å‡çº§ï¼ğŸš€
